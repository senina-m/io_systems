# Лабораторная работа 1

**Название:** "Разработка драйверов символьных устройств"

**Цель работы:** 

Получить знания и навыки разработки драйверов символьных устройств для операционной системы Linux.

## Описание функциональности драйвера

При записи в файл символьного устройства текста типа "2+3" должен запоминаться результат операции (5 для примера). Должны поддерживаться операции сложения, вычитания, умножения и деления. Последовательность полученных результатов с момента загрузки модуля ядра должна выводится при чтении файла /proc/var2 в консоль пользователя.

При чтении из файла символьного устройства в кольцевой буфер ядра должен осуществляться вывод тех же данных, которые выводятся при чтении файла /proc/var2.

## Инструкция по сборке

Сборка

`make`

Загрузка модуля в ядро

`sudo insmod ch_drv.ko`

Выгрузка модуля из ядра

`sudo rmmod ch_drv.ko`

Очистка

`make clean`

## Инструкция пользователя

Передать пример на рассчет:

`echo "2+3" > /dev/var2`

Получить список результатов примеров в консоль пользователя:

`cat /proc/var2`

Получить список результатов примеров в колцевой буфер ядра:

`cat /dev/var2`

## Примеры использования

```
natalia@natalia-VirtualBox:~/io_labs/io_systems/lab1$ sudo insmod ch_drv.ko
natalia@natalia-VirtualBox:~/io_labs/io_systems/lab1$ echo "13+78" > /dev/var2
natalia@natalia-VirtualBox:~/io_labs/io_systems/lab1$ echo "-3-14" > /dev/var2
natalia@natalia-VirtualBox:~/io_labs/io_systems/lab1$ cat /proc/var2
91;-17;
```

```
natalia@natalia-VirtualBox:~/io_labs/io_systems/lab1$ cat /dev/var2
natalia@natalia-VirtualBox:~/io_labs/io_systems/lab1$ dmesg
...
[196498.215066] Driver: read()
[196498.215067] buffer:
[196498.215068] '9'
[196498.215068] '1'
[196498.215069] ';'
[196498.215070] '-'
[196498.215070] '1'
[196498.215071] '7'
[196498.215071] ';'
[196498.215079] Driver: close()
```
